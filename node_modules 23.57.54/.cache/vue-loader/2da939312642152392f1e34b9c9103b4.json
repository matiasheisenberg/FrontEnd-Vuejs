{"remainingRequest":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matiascasullo/Downloads/proyecto-nt2-master/src/components/Comprador.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/src/components/Comprador.vue","mtime":1575939666244},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      center: { lat: -34.60903, lng: -58.447861 },\n      reservarBtnDisabled: false,\n      showInfo: false,\n      modalShow: false,\n      emailIngresado: null,\n      emailIngresadoState: null,\n      markers: [],\n      markerSelected: null,\n    };\n  },\n  created: function() {\n    axios.get('http://localhost:3000/markers')\n      .then((response) => {\n        this.markers = response.data;\n      })\n  },\n  methods: {\n    clickMarker(marker) {\n      this.center = marker.coords;\n      this.markerSelected = this.markers[marker.id],\n      this.showInfo = true;\n    },\n    // Método que recibe por parámetro el id del vehículo, para hacer \n    reservar() {\n      this.modalShow = true;\n    },\n    handleModalOk(bvModalEvt) {\n      // Prevent modal from closing\n      bvModalEvt.preventDefault();\n\n      // Trigger submit handler\n      this.handleModalSubmit();\n    },\n    checkFormValidity() {\n      const valid = this.$refs.form.checkValidity();\n\n      this.emailIngresadoState = valid ? 'valid' : 'invalid';\n\n      return valid;\n    },\n    handleModalSubmit() {\n      // Exit when the form isn't valid\n      if (!this.checkFormValidity()) {\n        return\n      }\n      this.markerSelected.reservado = true;\n\n axios.put('http://localhost:3000/markers/'+this.markerSelected.id,\n this.markerSelected \n )\n      \n      .then((response) => {\n      \n      })\n      \n      this.reservarBtnDisabled = true; \n\n      this.$bvToast.toast(`El vehiculo ${this.markerSelected.marca} ${this.markerSelected.modelo} ${this.markerSelected.ano} fue reservada.`, {\n        title: `Reserva exitosa!!!`,\n        variant: 'success',\n        solid: true\n      });\n\n      window.location.href = `mailto:${this.emailIngresado}?&subject=Reserva del Vehiculo ${this.markerSelected.marca} ${this.markerSelected.modelo}&body=Se adjuntan los datos de la reserva realizada. Vehiculo: ${this.markerSelected.marca} ${this.markerSelected.modelo} Año: ${this.markerSelected.ano} Kilometros: ${this.markerSelected.km} Color: ${this.markerSelected.color} Precio: ${this.markerSelected.precio}`;\n\n      this.modalShow = false;\n    }\n  }\n};\n\n",{"version":3,"sources":["Comprador.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"Comprador.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h1>Encontra el auto que estas buscando</h1>\n    {{markerSelected}}\n    <b-row>\n      <b-col sm=\"4\">\n        <b-card\n          v-if=\"showInfo\"\n        >\n          <b-card-text>\n            <!-- <p><strong>Marca:</strong> {{markerSelected.marca}}</p> -->\n            <p><strong>Marca:</strong> {{markerSelected.marca}}</p>\n            <p><strong>Modelo:</strong> {{markerSelected.modelo}}</p>\n            <p><strong>Año:</strong> {{markerSelected.ano}}</p>\n            <p><strong>Kilometros:</strong> {{markerSelected.km}}</p>\n            <p><strong>Color:</strong> {{markerSelected.color}}</p>\n            <p><strong>Precio: </strong> ${{markerSelected.precio}}</p>\n            <b-button @click=\"reservar\" variant=\"primary\">\n              Reservar vehiculo\n            </b-button>\n            <b-button class=\"mt-2\">\n              <router-link :to=\"{ name: 'detallecomprador', params: { id: markerSelected.id } }\" style=\"color: white\">\n              Detalles del vendedor\n              </router-link>\n            </b-button>\n          </b-card-text>\n        </b-card>\n      </b-col>\n      <b-col sm=\"8\">\n        <GmapMap\n          :center=\"center\"\n          :zoom=\"12\"\n          map-type-id=\"terrain\"\n          style=\"width: 100%; height: 700px; margin-bottom: 16px\"\n        >\n          <GmapMarker\n            :key=\"index\"\n            v-for=\"(m, index) in markers\"\n            v-if=\"!m.reservado\"\n            :position=\"m.coords\"\n            :clickable=\"true\"\n            :draggable=\"false\"\n            :icon=\"m.foto\"\n            @click=\"clickMarker(m)\" \n            style=\"width: 72px; height: 72px\"\n          >\n          </GmapMarker>\n        </GmapMap>\n      </b-col>\n    </b-row>\n    <b-modal\n      ok-only\n      no-close-on-backdrop\n      ref=\"modal\"\n      v-model=\"modalShow\"\n      title=\"Necesitamos tu email\"\n      @ok=\"handleModalOk\"\n    >\n      <form ref=\"form\" @submit.stop.prevent=\"handleModalSubmit\">\n        <b-form-group\n          :state=\"emailIngresadoState\"\n          label=\"Email\"\n          label-for=\"email-input\"\n          invalid-feedback=\"El email es requerido\"\n        >\n          <b-form-input\n            id=\"email-input\"\n            type=\"email\"\n            v-model=\"emailIngresado\"\n            :state=\"emailIngresadoState\"\n            required\n          ></b-form-input>\n        </b-form-group>\n      </form>\n    </b-modal>\n  </div>\n  \n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      center: { lat: -34.60903, lng: -58.447861 },\n      reservarBtnDisabled: false,\n      showInfo: false,\n      modalShow: false,\n      emailIngresado: null,\n      emailIngresadoState: null,\n      markers: [],\n      markerSelected: null,\n    };\n  },\n  created: function() {\n    axios.get('http://localhost:3000/markers')\n      .then((response) => {\n        this.markers = response.data;\n      })\n  },\n  methods: {\n    clickMarker(marker) {\n      this.center = marker.coords;\n      this.markerSelected = this.markers[marker.id],\n      this.showInfo = true;\n    },\n    // Método que recibe por parámetro el id del vehículo, para hacer \n    reservar() {\n      this.modalShow = true;\n    },\n    handleModalOk(bvModalEvt) {\n      // Prevent modal from closing\n      bvModalEvt.preventDefault();\n\n      // Trigger submit handler\n      this.handleModalSubmit();\n    },\n    checkFormValidity() {\n      const valid = this.$refs.form.checkValidity();\n\n      this.emailIngresadoState = valid ? 'valid' : 'invalid';\n\n      return valid;\n    },\n    handleModalSubmit() {\n      // Exit when the form isn't valid\n      if (!this.checkFormValidity()) {\n        return\n      }\n      this.markerSelected.reservado = true;\n\n axios.put('http://localhost:3000/markers/'+this.markerSelected.id,\n this.markerSelected \n )\n      \n      .then((response) => {\n      \n      })\n      \n      this.reservarBtnDisabled = true; \n\n      this.$bvToast.toast(`El vehiculo ${this.markerSelected.marca} ${this.markerSelected.modelo} ${this.markerSelected.ano} fue reservada.`, {\n        title: `Reserva exitosa!!!`,\n        variant: 'success',\n        solid: true\n      });\n\n      window.location.href = `mailto:${this.emailIngresado}?&subject=Reserva del Vehiculo ${this.markerSelected.marca} ${this.markerSelected.modelo}&body=Se adjuntan los datos de la reserva realizada. Vehiculo: ${this.markerSelected.marca} ${this.markerSelected.modelo} Año: ${this.markerSelected.ano} Kilometros: ${this.markerSelected.km} Color: ${this.markerSelected.color} Precio: ${this.markerSelected.precio}`;\n\n      this.modalShow = false;\n    }\n  }\n};\n\n</script>\n\n<style>\n"]}]}