{"remainingRequest":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/babel-loader/lib/index.js!/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matiascasullo/Downloads/proyecto-nt2-master/src/components/Vendedor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/src/components/Vendedor.vue","mtime":1575849534000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseFloat from \"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/@babel/runtime-corejs2/core-js/parse-float\";\nimport _parseInt from \"/Users/matiascasullo/Downloads/proyecto-nt2-master/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      añoMinimo: null,\n      añoMaximo: 2019,\n      modalShow: localStorage.getItem('usuarioEncontrado') ? false : true,\n      loading: false,\n      auto: {\n        coords: {\n          lat: null,\n          lng: null\n        },\n        precio: null,\n        km: null,\n        marca: null,\n        modelo: null,\n        ano: null,\n        foto: null,\n        color: null,\n        nombreContacto: null,\n        telefonoContacto: null,\n        emailContacto: null,\n        residenciaContacto: null,\n        dniContacto: null\n      },\n      dniIngresado: localStorage.getItem('usuarioEncontrado') ? JSON.parse(localStorage.getItem('usuarioDni')) : null,\n      dniIngresadoState: null,\n      usuarioEncontrado: localStorage.getItem('usuarioEncontrado') ? JSON.parse(localStorage.getItem('usuarioEncontrado')) : false,\n      arrayDeMarcas: [],\n      vendedores: [],\n      markers: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // Hacemos todo lo necesario antes de que se vea la pagina.\n    var añoMinimoDesdeServicio = 1885; // VENDRIA DESDE UN SERVICIO\n\n    var añoMaximoDesdeServicio = 2019; // VENDRIA DESDE UN SERVICIO\n\n    this.añoMinimo = añoMinimoDesdeServicio;\n    this.añoMaximo = añoMaximoDesdeServicio;\n    axios.get('http://localhost:3000/marcas').then(function (response) {\n      _this.arrayDeMarcas = response.data;\n    });\n    axios.get('http://localhost:3000/vendedores').then(function (response) {\n      _this.vendedores = response.data;\n    });\n    axios.get('http://localhost:3000/markers').then(function (response) {\n      _this.markers = response.data;\n    });\n  },\n  // define métodos dentro del objeto `methods`\n  methods: {\n    checkFormValidity: function checkFormValidity() {\n      var valid = this.$refs.form.checkValidity();\n      this.auto.dniState = valid ? 'valid' : 'invalid';\n      return valid;\n    },\n    handleModalOk: function handleModalOk(bvModalEvt) {\n      // Prevent modal from closing\n      bvModalEvt.preventDefault(); // Trigger submit handler\n\n      this.handleModalSubmit();\n    },\n    handleAutenticacion: function handleAutenticacion() {\n      var _this2 = this;\n\n      var usuario = this.vendedores.find(function (vendedor) {\n        return vendedor.dniContacto === _parseInt(_this2.dniIngresado);\n      });\n\n      if (usuario) {\n        this.usuarioEncontrado = true;\n        this.auto.nombreContacto = usuario.nombreContacto;\n        this.auto.telefonoContacto = usuario.telefonoContacto;\n        this.auto.emailContacto = usuario.emailContacto;\n        this.auto.residenciaContacto = usuario.residenciaContacto;\n        this.auto.dniContacto = usuario.dniContacto;\n        this.$bvToast.toast(\"Es bueno verte volver\", {\n          title: \"Hola, \".concat(usuario.nombreContacto),\n          variant: 'success',\n          toaster: 'b-toaster-top-center',\n          solid: true\n        });\n      } else {\n        this.$bvToast.toast(\"Asegurate de agregar tus datos al publicar un vehiculo\", {\n          title: \"No encontramos cuenta con tus datos\",\n          variant: 'danger',\n          toaster: 'b-toaster-top-center',\n          solid: true\n        });\n      }\n\n      localStorage.setItem('usuarioEncontrado', this.usuarioEncontrado);\n      localStorage.setItem('usuarioDni', this.auto.dniContacto);\n      this.modalShow = false; // Hide the modal manually\n\n      this.$nextTick(function () {\n        _this2.$refs.modal.hide();\n      });\n    },\n    handleModalSubmit: function handleModalSubmit() {\n      // Exit when the form isn't valid\n      if (!this.checkFormValidity()) {\n        return;\n      } // Show loader\n\n\n      this.loading = true;\n      this.handleAutenticacion();\n    },\n    onSubmit: function onSubmit(evt) {\n      var _this3 = this;\n\n      evt.preventDefault();\n      var usuario = this.vendedores.find(function (vendedor) {\n        return vendedor.dniContacto === _this3.dniIngresado;\n      });\n      this.auto.coords.lat = _parseFloat(this.auto.coords.lat);\n      this.auto.coords.lng = _parseFloat(this.auto.coords.lng);\n      this.auto.marca = this.auto.marca.texto;\n      this.auto.id = this.markers[this.markers.length - 1].id + 1; // Subimos los datos del vendedor si no existe\n      // Si existe cargamos los datos del vendedor\n\n      if (!this.usuarioEncontrado) {\n        axios.post('http://localhost:3000/vendedores', {\n          id: this.vendedores[this.vendedores.length - 1].id + 1,\n          nombreContacto: this.auto.nombreContacto,\n          telefonoContacto: _parseInt(this.auto.telefonoContacto),\n          emailContacto: this.auto.emailContacto,\n          residenciaContacto: this.auto.residenciaContacto,\n          dniContacto: _parseInt(this.auto.dniContacto)\n        });\n      } else {\n        this.auto.nombreContacto = usuario.nombreContacto;\n        this.auto.telefonoContacto = usuario.telefonoContacto;\n        this.auto.emailContacto = usuario.emailContacto;\n        this.auto.residenciaContacto = usuario.residenciaContacto;\n        this.auto.dniContacto = _parseInt(usuario.dniContacto);\n      } // Subimos los datos del nuevo marker\n\n\n      axios.post('http://localhost:3000/markers', this.auto); // Mostramos un mensaje de exito\n\n      this.$bvToast.toast(\"Se publico el vehiculo correctamente\", {\n        title: \"Publicacion exitosa!!!\",\n        variant: 'success',\n        solid: true\n      });\n    }\n  }\n};",{"version":3,"sources":["Vendedor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <h1>Complete los siguientes datos obligatorios</h1>\n    <b-container fluid>\n      <b-form @submit=\"onSubmit\">\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Marca del auto</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <select required class=\"custom-select\" v-model=\"auto.marca\">\n              <option disabled :value=\"null\">Selecciona la marca del auto</option>\n              <option v-for=\"marca in arrayDeMarcas\" :key=\"marca.id\" :value=\"marca\">{{marca.texto}}</option>\n            </select>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\" v-if=\"auto.marca != null\">\n          <b-col sm=\"3\">\n            <label>Modelo:</label>\n          </b-col>\n\n          <b-col sm=\"9\">\n            <select required class=\"custom-select\" v-model=\"auto.modelo\">\n              <option disabled :value=\"null\">Selecciona el modelo del auto</option>\n              <option\n                v-for=\"modelo in auto.marca.modelos\"\n                :key=\"modelo.id\"\n                :value=\"modelo.texto\"\n              >\n                {{modelo.texto}}\n              </option>\n            </select>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Año</label>\n          </b-col>\n\n          <b-col sm=\"9\">\n            <b-form-input required v-model=\"auto.ano\" type=\"range\" :min=\"añoMinimo\" :max=\"añoMaximo\"></b-form-input>\n            <div class=\"mt-2\">Año seleccionado: {{ auto.ano }}</div>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Kilometros:</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <b-form-input type=\"number\" required placeholder=\"Ingresa los kilometros del auto\" v-model=\"auto.km\"></b-form-input>\n          </b-col>\n        </b-row>\n\n         <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Color:</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <b-form-input required placeholder=\"Ingresa el color del auto\" v-model=\"auto.color\"></b-form-input>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Precio</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <b-form-input type=\"number\" required placeholder=\"Ingresa el precio del auto\" v-model=\"auto.precio\"></b-form-input>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>URL de la foto del auto</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <b-form-input required placeholder=\"Ingresa la url de la imagen\" v-model=\"auto.foto\"></b-form-input>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Longuitud</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <b-form-input required placeholder=\"Ingresa la longitud de la ubicacion\" v-model=\"auto.coords.lng\"></b-form-input>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"my-3\">\n          <b-col sm=\"3\">\n            <label>Latitud</label>\n          </b-col>\n          <b-col sm=\"9\">\n            <b-form-input required placeholder=\"Ingresa la latitud de la ubicacion\" v-model=\"auto.coords.lat\"></b-form-input>\n          </b-col>\n        </b-row>\n\n        <hr />\n\n        <div v-if=\"!usuarioEncontrado\">\n          <b-row class=\"my-3\">\n            <b-col sm=\"3\">\n              <label>Nombre</label>\n            </b-col>\n            <b-col sm=\"9\">\n              <b-form-input required placeholder=\"Ingresa tu nombre\" v-model=\"auto.nombreContacto\"></b-form-input>\n            </b-col>\n          </b-row>\n\n          <b-row class=\"my-3\">\n            <b-col sm=\"3\">\n              <label>Telefono de contacto</label>\n            </b-col>\n            <b-col sm=\"9\">\n              <b-form-input type=\"number\" required placeholder=\"Ingresa un dato de contacto\" v-model=\"auto.telefonoContacto\"></b-form-input>\n            </b-col>\n          </b-row>\n\n          <b-row class=\"my-3\">\n            <b-col sm=\"3\">\n              <label>Email de contacto</label>\n            </b-col>\n            <b-col sm=\"9\">\n              <b-form-input type=\"email\" required placeholder=\"Ingresa un email\" v-model=\"auto.emailContacto\"></b-form-input>\n            </b-col>\n          </b-row>\n\n          <b-row class=\"my-3\">\n            <b-col sm=\"3\">\n              <label>Lugar de residencia</label>\n            </b-col>\n            <b-col sm=\"9\">\n              <b-form-input required placeholder=\"Ingresa un lugar de residencia\" v-model=\"auto.residenciaContacto\"></b-form-input>\n            </b-col>\n          </b-row>\n\n          <b-row class=\"my-3\">\n            <b-col sm=\"3\">\n              <label>DNI</label>\n            </b-col>\n            <b-col sm=\"9\">\n              <b-form-input required placeholder=\"Ingresa su DNI\" v-model=\"auto.dniContacto\"></b-form-input>\n            </b-col>\n          </b-row>\n        </div>\n\n        <b-button size=\"lg\" type=\"submit\" variant=\"primary\" class=\"mb-2\">Publicar el auto</b-button>\n\n      </b-form>\n\n       <b-modal\n        ok-only\n        no-close-on-backdrop\n        ref=\"modal\"\n        v-model=\"modalShow\"\n        title=\"Aseguremos tu identidad\"\n        @ok=\"handleModalOk\"\n      >\n        <form ref=\"form\" @submit.stop.prevent=\"handleModalSubmit\">\n          <b-spinner v-if=\"loading\" label=\"Spinning\"></b-spinner>\n          <b-form-group\n            :state=\"dniIngresadoState\"\n            label=\"DNI\"\n            label-for=\"dni-input\"\n            invalid-feedback=\"El DNI es requerido\"\n            v-if=\"!loading\"\n          >\n            <b-form-input\n              id=\"dni-input\"\n              v-model=\"dniIngresado\"\n              :state=\"dniIngresadoState\"\n              required\n            ></b-form-input>\n          </b-form-group>\n        </form>\n      </b-modal>\n    </b-container>\n\n  </div>\n</template>\n\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      añoMinimo: null,\n      añoMaximo: 2019,\n      modalShow: localStorage.getItem('usuarioEncontrado') ? false : true,\n      loading: false,\n      auto: {\n        coords: { lat: null, lng: null },\n        precio: null,\n        km: null,\n        marca: null,\n        modelo: null,\n        ano: null,\n        foto: null,\n        color: null,\n        nombreContacto: null,\n        telefonoContacto: null,\n        emailContacto: null,\n        residenciaContacto: null,\n        dniContacto: null,\n      },\n      dniIngresado: localStorage.getItem('usuarioEncontrado') ? JSON.parse(localStorage.getItem('usuarioDni')) : null,\n      dniIngresadoState: null,\n      usuarioEncontrado: localStorage.getItem('usuarioEncontrado') ? JSON.parse(localStorage.getItem('usuarioEncontrado')) : false,\n      arrayDeMarcas: [],\n      vendedores: [],\n      markers: [],\n    };\n  },\n  created: function() {\n    // Hacemos todo lo necesario antes de que se vea la pagina.\n    let añoMinimoDesdeServicio = 1885 // VENDRIA DESDE UN SERVICIO\n    let añoMaximoDesdeServicio = 2019 // VENDRIA DESDE UN SERVICIO\n    this.añoMinimo = añoMinimoDesdeServicio;\n    this.añoMaximo = añoMaximoDesdeServicio;\n\n    axios.get('http://localhost:3000/marcas')\n      .then((response) => {\n        this.arrayDeMarcas = response.data;\n      })\n\n    axios.get('http://localhost:3000/vendedores')\n      .then((response) => {\n        this.vendedores = response.data;\n      })\n\n     axios.get('http://localhost:3000/markers')\n      .then((response) => {\n        this.markers = response.data;\n      })\n  },\n  // define métodos dentro del objeto `methods`\n  methods: {\n    checkFormValidity() {\n      const valid = this.$refs.form.checkValidity();\n\n      this.auto.dniState = valid ? 'valid' : 'invalid';\n\n      return valid;\n    },\n    handleModalOk(bvModalEvt) {\n      // Prevent modal from closing\n      bvModalEvt.preventDefault();\n\n      // Trigger submit handler\n      this.handleModalSubmit();\n    },\n    handleAutenticacion() {\n      const usuario = this.vendedores.find(vendedor => vendedor.dniContacto === parseInt(this.dniIngresado));\n      \n      if (usuario) {\n        this.usuarioEncontrado = true;\n        this.auto.nombreContacto = usuario.nombreContacto;\n        this.auto.telefonoContacto = usuario.telefonoContacto;\n        this.auto.emailContacto = usuario.emailContacto;\n        this.auto.residenciaContacto = usuario.residenciaContacto;\n        this.auto.dniContacto = usuario.dniContacto;\n\n        this.$bvToast.toast(`Es bueno verte volver`, {\n          title: `Hola, ${usuario.nombreContacto}`,\n          variant: 'success',\n          toaster: 'b-toaster-top-center',\n          solid: true\n        });\n      } else {\n        this.$bvToast.toast(`Asegurate de agregar tus datos al publicar un vehiculo`, {\n          title: `No encontramos cuenta con tus datos`,\n          variant: 'danger',\n          toaster: 'b-toaster-top-center',\n          solid: true\n        });\n      }\n\n      localStorage.setItem('usuarioEncontrado', this.usuarioEncontrado);\n      localStorage.setItem('usuarioDni', this.auto.dniContacto);\n\n      this.modalShow = false;\n\n      // Hide the modal manually\n      this.$nextTick(() => {\n        this.$refs.modal.hide()\n      });\n    },\n    handleModalSubmit() {\n      // Exit when the form isn't valid\n      if (!this.checkFormValidity()) {\n        return\n      }\n      \n      // Show loader\n      this.loading = true;\n\n      this.handleAutenticacion();\n    },\n    onSubmit(evt) {\n      evt.preventDefault();\n      \n      const usuario = this.vendedores.find(vendedor => vendedor.dniContacto === this.dniIngresado);\n\n      this.auto.coords.lat = parseFloat(this.auto.coords.lat);\n      this.auto.coords.lng = parseFloat(this.auto.coords.lng);\n      this.auto.marca = this.auto.marca.texto;\n      this.auto.id = this.markers[this.markers.length - 1].id + 1;\n\n      // Subimos los datos del vendedor si no existe\n      // Si existe cargamos los datos del vendedor\n      if (!this.usuarioEncontrado) {\n        axios.post('http://localhost:3000/vendedores', {\n          id: this.vendedores[this.vendedores.length - 1].id + 1,\n          nombreContacto: this.auto.nombreContacto,\n          telefonoContacto: parseInt(this.auto.telefonoContacto),\n          emailContacto: this.auto.emailContacto,\n          residenciaContacto: this.auto.residenciaContacto,\n          dniContacto: parseInt(this.auto.dniContacto),\n        });\n      } else {\n        this.auto.nombreContacto = usuario.nombreContacto;\n        this.auto.telefonoContacto = usuario.telefonoContacto;\n        this.auto.emailContacto = usuario.emailContacto;\n        this.auto.residenciaContacto = usuario.residenciaContacto;\n        this.auto.dniContacto = parseInt(usuario.dniContacto);\n      }\n\n      // Subimos los datos del nuevo marker\n      axios.post('http://localhost:3000/markers', this.auto);\n\n      // Mostramos un mensaje de exito\n      this.$bvToast.toast(`Se publico el vehiculo correctamente`, {\n        title: `Publicacion exitosa!!!`,\n        variant: 'success',\n        solid: true\n      });\n    },\n  },\n};\n</script>"],"sourceRoot":"src/components"}]}